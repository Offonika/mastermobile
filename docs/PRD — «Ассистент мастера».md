PRD ‚Äî –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç –º–∞—Å—Ç–µ—Ä–∞ (Telegram-–±–æ—Ç ‚Üî Bitrix)

–í–µ—Ä—Å–∏—è: v1.1.0 ‚Ä¢ –î–∞—Ç–∞: 02.10.2025
–í–ª–∞–¥–µ–ª–µ—Ü –ø—Ä–æ–¥—É–∫—Ç–∞: –û–ø–µ—Ä–∞—Ü–∏–∏ / E-commerce
–û—Å–Ω–æ–≤–∞–Ω–æ –Ω–∞: ONE-PAGER v0.1.5, 00-Core (SLA, Security, Metrics), API-Contracts (Bot/MW/Bitrix)

1) –†–µ–∑—é–º–µ

–°–¥–µ–ª–∞—Ç—å Telegram-–±–æ—Ç–∞ –¥–ª—è –º–∞—Å—Ç–µ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞ –¥–∞–Ω–Ω—ã—Ö —Ç–æ–ª—å–∫–æ –ë–∏—Ç—Ä–∏–∫—Å –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–∫–∞—Ç—å –¥–µ—Ç–∞–ª–∏, –æ—Ñ–æ—Ä–º–ª—è—Ç—å –∑–∞–∫–∞–∑—ã (prepaid/COD), –≤–∏–¥–µ—Ç—å —Å—Ç–∞—Ç—É—Å—ã/—Ç—Ä–µ–∫–∏–Ω–≥/–≤–æ–∑–≤—Ä–∞—Ç—ã –∏ –ø–æ–ª—É—á–∞—Ç—å –∫—Ä–∞—Ç–∫–∏–µ —Ç–µ—Ö–ø–æ–¥—Å–∫–∞–∑–∫–∏. Tech-–º–æ–¥—É–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ø—Ä–æ–º—Ç-—á–µ–∫–ª–∏—Å—Ç–∞—Ö (–±–µ–∑ RAG). RAG ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ –∫–∞—Ç–∞–ª–æ–≥—É (–≤–∫–ª—é—á–∞–µ—Ç—Å—è –ø–æ –º–µ—Ç—Ä–∏–∫–∞–º). –í—Å—Ç—Ä–æ–∏—Ç—å –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏—é: AI-—Ç–æ–∫–µ–Ω—ã –∑–∞ –ø–æ–∫—É–ø–∫–∏ ‚Äî –¥–æ—Å—Ç—É–ø –∫ GPT-–∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è–º.

2) –¶–µ–ª–∏ –∏ KPI
2.1 –¶–µ–ª–∏ v1 (2‚Äì3 –Ω–µ–¥–µ–ª–∏)

–ü–æ–∏—Å–∫/–∫–∞—Ä—Ç–æ—á–∫–∏/—Ü–µ–Ω—ã/–æ—Å—Ç–∞—Ç–∫–∏ –∏–∑ Bitrix —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –≤–∏—Ç—Ä–∏–Ω–µ (–æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å).

¬´–ó–∞–∫–∞–∑–∞—Ç—å¬ª (prepaid) + ¬´–ù–µ—Å–∏¬ª (COD) end-to-end —á–µ—Ä–µ–∑ Bitrix (—Ä–µ–∑–µ—Ä–≤ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏, –∞–≤—Ç–æ-—Å–Ω—è—Ç–∏–µ —á–µ—Ä–µ–∑ 3 –¥–Ω—è).

–ò—Å—Ç–æ—Ä–∏—è –∏ —Å—Ç–∞—Ç—É—Å—ã –∑–∞–∫–∞–∑–æ–≤ ‚Äî –∫–∞–∫ –≤ –õ–ö (—Ç–æ–ª—å–∫–æ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–µ —Å—Ç–∞—Ç—É—Å—ã).

–ú–∏–Ω–∏-RMA: —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è + —Ñ–æ—Ç–æ; –Ω–æ–º–µ—Ä RMA –∏ —Å—Ç–∞—Ç—É—Å pending.

üéÆ AI-—Ç–æ–∫–µ–Ω—ã: –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ –ø—Ä–∏ –æ–ø–ª–∞—Ç–µ, —Å–ø–∏—Å–∞–Ω–∏–µ –∑–∞ GPT-–∑–∞–ø—Ä–æ—Å—ã, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑–º–µ–Ω—è–µ–º—ã –±–µ–∑ —Ä–µ–ª–∏–∑–∞.

2.2 KPI / –º–µ—Ç—Ä–∏–∫–∏ –ø–∏–ª–æ—Ç–∞

p95 –æ—Ç–≤–µ—Ç–∞ (—Å–æ STT) ‚â§ 5 —Å, p99 ‚â§ 8 —Å.

–¢–æ—á–Ω–æ—Å—Ç—å NLU (golden-set) ‚â• 80% F1.

CTR –∫–∞—Ä—Ç–æ—á–µ–∫ ‚â• 35‚Äì40%; –∫–æ–Ω–≤–µ—Ä—Å–∏—è ¬´–ø–æ–∏—Å–∫ ‚Üí –∑–∞–∫–∞–∑¬ª ‚â• 5‚Äì7%.

–î–æ–ª—è no-result ‚â§ 10%, –∞–≤—Ç–æ-—É—Ç–æ—á–Ω–µ–Ω–∏—è ‚â§ 25%.

üéÆ AI-—Ç–æ–∫–µ–Ω—ã: ‚â• 60% –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º –±–∞–ª–∞–Ω—Å–æ–º; —Å–ø–∏—Å–∞–Ω–∏–π/–Ω–∞—á–∏—Å–ª–µ–Ω–∏–π –≤ –¥–µ–Ω—å ‚â• 0,5 –Ω–∞ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ.

3) Scope, –¥–æ–ø—É—â–µ–Ω–∏—è, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
In scope v1

–¢–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç (—Ç–µ–∫—Å—Ç+–≥–æ–ª–æ—Å/Whisper), –ø—Ä–æ–º—Ç-NLU, –∫–∞—Ä—Ç–æ—á–∫–∏ –∫–∞—Ç–∞–ª–æ–≥–∞, –∫–æ—Ä–∑–∏–Ω–∞, –∑–∞–∫–∞–∑ prepaid/COD, /myorders, /track, /return, /howto.

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ç–æ–ª—å–∫–æ —Å Bitrix (–∫–∞—Ç–∞–ª–æ–≥/—Ü–µ–Ω—ã/–æ—Å—Ç–∞—Ç–∫–∏/–∑–∞–∫–∞–∑—ã/—Å—Ç–∞—Ç—É—Å—ã/–æ–ø–ª–∞—Ç–∞/–¥–æ—Å—Ç–∞–≤–∫–∞).

üéÆ AI-—Ç–æ–∫–µ–Ω—ã: –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ/—Å–ø–∏—Å–∞–Ω–∏–µ/–±–∞–ª–∞–Ω—Å/–∫–æ–Ω—Ñ–∏–≥–∏.

Out of scope v1

–ü–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –º–µ–∂–¥—É —Å–∫–ª–∞–¥–∞–º–∏ (–æ–ø–µ—Ä–∞—Ü–∏–∏ 1–°), –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è, –≤–µ–±-–≤–∏–¥–∂–µ—Ç, –≤–Ω–µ—à–Ω–∏–µ –ø–æ–∏—Å–∫–∏, –ª—é–±–∞—è –ë–ó/RAG –¥–ª—è Tech.

–î–æ–ø—É—â–µ–Ω–∏—è

–î–æ—Å—Ç—É–ø –∫ Bitrix (REST/–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –º–µ—Ç–æ–¥—ã/–ë–î) –∏ –∫ –ø–ª–∞—Ç—ë–∂–Ω—ã–º –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º (CloudPayments/–ÆKassa).

–ö–∞—Ç–∞–ª–æ–≥: iblock 17 (–æ—Å–Ω–æ–≤–Ω–æ–π), 48 (–ø–æ–¥ –∑–∞–∫–∞–∑); —Å–≤–æ–π—Å—Ç–≤–∞: BARCODE, CML2_ARTICLE, BRAND, COLOR, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è.

–°–∫–ª–∞–¥—Å–∫–æ–π —É—á—ë—Ç –≤ –ë–£–° –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–∫–ª—é—á–µ–Ω ‚Äî —Ç–æ–≥–¥–∞ –æ—Å—Ç–∞—Ç–∫–∏ –≤ UI –∫–∞–∫ ¬´–º–Ω–æ–≥–æ/–º–∞–ª–æ/–Ω–µ—Ç¬ª (—Å–≤–æ–¥–Ω–æ). –ï—Å–ª–∏ –≤–∫–ª—é—á—ë–Ω per-store, –±–æ—Ç –ø–æ–≤—Ç–æ—Ä—è–µ—Ç –≤–∏—Ç—Ä–∏–Ω—É.

–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

–í–∞–ª—é—Ç–∞ UI: RUB (USD/–±/–Ω –∏ ¬´—Å–ª—É–∂–µ–±–Ω—ã–µ¬ª —Ç–∏–ø—ã —Ü–µ–Ω —Å–∫—Ä—ã—Ç—ã).

/order rate-limit ‚â§ 5/–º–∏–Ω –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

–ë–æ—Ç –Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç –±–∏–∑–Ω–µ—Å-–¥–∞–Ω–Ω—ã–µ (—Ç–æ–ª—å–∫–æ —á–∏—Ç–∞–µ—Ç/—Å–æ–∑–¥–∞—ë—Ç –∑–∞–∫–∞–∑—ã/RMA —á–µ—Ä–µ–∑ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã).

4) –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –ø–æ—Ç–æ–∫
–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

Bot (TG) ‚Üî MW (FastAPI) ‚Üî Bitrix (/local/api/*).

STT: Whisper.

üéÆ AI-—Ç–æ–∫–µ–Ω—ã: HL-–±–ª–æ–∫/—Ç–∞–±–ª–∏—Ü–∞ ai_tokens –≤ Bitrix –∏–ª–∏ –ë–î MW.

–ü–æ—Ç–æ–∫ –æ—Å–Ω–æ–≤–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

/bot/find ‚Üí MW –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç –∑–∞–ø—Ä–æ—Å ‚Üí Bitrix –ø–æ–∏—Å–∫ ‚Üí 3‚Äì5 –∫–∞—Ä—Ç–æ—á–µ–∫.

/bot/order prepaid/COD ‚Üí –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º ‚Äî –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ price/stock ‚Üí –∑–∞–∫–∞–∑ –≤ Bitrix ‚Üí —Ä–µ–∑–µ—Ä–≤ —Å—Ä–∞–∑—É; TTL 3 –¥–Ω—è.

/bot/orders –∏ /bot/track ‚Üí —á–∏—Ç–∞–µ–º –∑–∞–∫–∞–∑—ã/–æ—Ç–≥—Ä—É–∑–∫–∏ Bitrix ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–µ —Å—Ç–∞—Ç—É—Å—ã.

/bot/rma ‚Üí –∑–∞–ø–∏—Å—å –≤ HL-–±–ª–æ–∫ rma_requests (–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä –ø–æ–ª–µ–π).

payment/delivery/* ‚Üí –ø–æ–≤—Ç–æ—Ä—è–µ–º –ª–æ–≥–∏–∫—É –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è Bitrix (–ø–æ —Å–∞–π—Ç—É/–≥–æ—Ä–æ–¥—É/–ü–°).

üéÆ order.paid (Bitrix) ‚Üí –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ AI-—Ç–æ–∫–µ–Ω–æ–≤; –∫–∞–∂–¥—ã–π GPT-–∑–∞–ø—Ä–æ—Å ‚Üí —Å–ø–∏—Å–∞–Ω–∏–µ –ø–æ —Ç–∞—Ä–∏—Ñ—É.

5) –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è (—ç–ø–∏–∫–∏ ‚Üí DoD)

F1. –ü–æ–∏—Å–∫ –∏ –∫–∞—Ä—Ç–æ—á–∫–∏
DoD: –≤—ã–¥–∞—á–∞ –∏–¥–µ–Ω—Ç–∏—á–Ω–∞ –≤–∏—Ç—Ä–∏–Ω–µ (–Ω–∞–∑–≤–∞–Ω–∏—è/—Ü–µ–Ω—ã/–Ω–∞–ª–∏—á–∏–µ/—Ñ–æ—Ç–æ), 3‚Äì5 –ø–æ–∑–∏—Ü–∏–π, —Ñ–∏–ª—å—Ç—Ä—ã (–º–æ–¥–µ–ª—å/–∫–∞—á–µ—Å—Ç–≤–æ/—Ü–≤–µ—Ç). SKU-–∫–ª—é—á ‚Äî BARCODE (—Ñ–æ–ª–±—ç–∫–∏: PRODUCT_ID | XML_ID | CML2_ARTICLE).

F2. –ö–æ—Ä–∑–∏–Ω–∞
DoD: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ/–∫–æ–ª-–≤–æ; –º–∏–Ω–∏-–∏—Ç–æ–≥; –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–¥ –∑–∞–∫–∞–∑–æ–º.

F3. –ó–∞–∫–∞–∑ (prepaid/COD)
DoD: –¥–≤–æ–π–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–Ω/–æ—Å—Ç–∞—Ç–∫–æ–≤; –ø—Ä–∏ —É—Å–ø–µ—Ö–µ ‚Äî –∑–∞–∫–∞–∑ –≤ Bitrix, —Å—Ç–∞—Ç—É—Å ¬´–Ω–µ –æ–ø–ª–∞—á–µ–Ω¬ª (prepaid) –∏–ª–∏ ¬´–≤ —Ä–∞–±–æ—Ç–µ¬ª (COD), —Ä–µ–∑–µ—Ä–≤ –Ω–∞ —Å–∫–ª–∞–¥–µ/—Å–≤–æ–¥–Ω—ã–π; TTL 3 –¥–Ω—è; —Å—Å—ã–ª–∫–∞ –Ω–∞ –æ–ø–ª–∞—Ç—É –¥–ª—è prepaid.

F4. –ò—Å—Ç–æ—Ä–∏—è/—Å—Ç–∞—Ç—É—Å—ã/—Ç—Ä–µ–∫–∏–Ω–≥
DoD: —Å—Ç–∞—Ç—É—Å—ã –∫–∞–∫ –≤ –õ–ö (–ø–æ –ø—Ä–∞–≤–∞–º ¬´–ü—Ä–æ—Å–º–æ—Ç—Ä¬ª), —á–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º—ã–µ; —Ç—Ä–µ–∫–∏–Ω–≥ –¥–æ—Å—Ç–∞–≤–∫–∏ (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω —É —Å–ª—É–∂–±—ã).

F5. –ú–∏–Ω–∏-RMA
DoD: —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è (–ø—Ä–∏—á–∏–Ω–∞, —Ñ–æ—Ç–æ), RMA ID/QR, —Å—Ç–∞—Ç—É—Å pending –≤ HL-–±–ª–æ–∫–µ; —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –º–µ–Ω–µ–¥–∂–µ—Ä—É –ø–æ –ø—Ä–æ—Ü–µ—Å—Å—É.

F6. Tech-–ø–æ–¥—Å–∫–∞–∑–∫–∏
DoD: 4‚Äì6 —à–∞–≥–æ–≤, –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã/—Ä–∞—Å—Ö–æ–¥–Ω–∏–∫–∏/—Ä–∏—Å–∫–∏; CTA ¬´–ó–∞–∫–∞–∑–∞—Ç—å –∫–æ–º–ø–ª–µ–∫—Ç¬ª.

F7. üéÆ AI-—Ç–æ–∫–µ–Ω—ã
DoD: –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ –Ω–∞ order.paid; –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º—ã–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã/–±–æ–Ω—É—Å—ã/—Å—Ä–æ–∫; —Å–ø–∏—Å–∞–Ω–∏–µ –∑–∞ GPT-–∑–∞–ø—Ä–æ—Å—ã; –∫–æ–º–∞–Ω–¥–∞ /balance; –ª–æ–≥ –æ–ø–µ—Ä–∞—Ü–∏–π.

6) API (Bot ‚Üî MW, v1)

POST /bot/find ‚Üí { items:[{sku,title,quality,color,price_from,currency,stock_short,url,image}] }
POST /bot/cart/add { sku, qty } ‚Üí { cart_id, items_count }
POST /bot/order { items[], payment:"prepaid"|"cod", address? } ‚Üí { order_id, payment_url?, status }
GET /bot/orders?user_id ‚Üí { orders:[{id,status,eta,amount}] }
POST /bot/rma { order_id, items[], photos[] } ‚Üí { rma_id, status:"pending" }
GET /bot/balance ‚Üí { tokens, expire_at }

–í—Å–µ –æ—Ç–≤–µ—Ç—ã –æ—à–∏–±–æ–∫ –≤ —Ñ–æ—Ä–º–∞—Ç–µ:

{ "code":"STRING", "message":"STRING", "hint":"STRING?", "retryable":true|false, "correlation_id":"UUID" }


–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è: X-Request-Id, Idempotency-Key –Ω–∞ /bot/order (—Ö—Ä–∞–Ω–∏—Ç—å 72 —á), —Ç–∞–π–º–∞—É—Ç 8 —Å, –±–µ–∑ —Ä–µ—Ç—Ä–∞–µ–≤ –Ω–∞ 4xx.

7) –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Bitrix (–≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è)

–ö–∞—Ç–∞–ª–æ–≥/–ø–æ–∏—Å–∫: iblock 17/48; —Å–≤–æ–π—Å—Ç–≤–∞: BARCODE, CML2_ARTICLE, BRAND, COLOR; —Ñ–æ—Ç–æ: DETAIL_PICTURE‚ÜíMORE_PHOTO.
–¶–µ–Ω—ã: UI ‚Äî RUB; –≥–æ—Å—Ç—å ‚Üí –†–æ–∑–Ω–∏—Ü–∞ (BASE). –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ ‚Äî —Ç–∏–ø —Ü–µ–Ω—ã –ø–æ –≥—Ä—É–ø–ø–µ (2.–ë—Ä–æ–Ω–∑–æ–≤—ã–π/3.–°–µ—Ä–µ–±—Ä—è–Ω—ã–π/4.–ó–æ–ª–æ—Ç–æ–π). –†–∞—Å—á—ë—Ç —á–µ—Ä–µ–∑ GetOptimalPrice(USER_ID) (—É—á—ë—Ç —Å–∫–∏–¥–æ–∫/–∫—É–ø–æ–Ω–æ–≤).
–û—Å—Ç–∞—Ç–∫–∏/—Ä–µ–∑–µ—Ä–≤—ã: –ø–æ–≤—Ç–æ—Ä—è–µ–º –≤–∏—Ç—Ä–∏–Ω—É (per-store –∏–ª–∏ —Å–≤–æ–¥–Ω—ã–µ ¬´–º–Ω–æ–≥–æ/–º–∞–ª–æ/–Ω–µ—Ç¬ª); —Ä–µ–∑–µ—Ä–≤ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–∫–∞–∑–∞, –∞–≤—Ç–æ-—Å–Ω—è—Ç–∏–µ —á–µ—Ä–µ–∑ 3 –¥–Ω—è.
–û–ø–ª–∞—Ç–∞/–¥–æ—Å—Ç–∞–≤–∫–∞: –ü–° –∏ —Å–ª—É–∂–±—ã –¥–æ—Å—Ç–∞–≤–∫–∏ –∏ –∏—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è ‚Äî –∫–∞–∫ –≤ –ë–∏—Ç—Ä–∏–∫—Å (–ø–æ —Å–∞–π—Ç—É/–≥–æ—Ä–æ–¥—É/–ü–°).
–°—Ç–∞—Ç—É—Å—ã: –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–µ (–ø—Ä–∞–≤–∞ ¬´–ü—Ä–æ—Å–º–æ—Ç—Ä¬ª –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Å—Ç–∞—Ç—É—Å–æ–≤). –ú–∞–ø–ø–∏–Ω–≥ –≤ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ:
new | processing | packed | shipped | delivered | returned | canceled.
–í–µ–±—Ö—É–∫–∏ (Bitrix ‚Üí Bot): order.status.changed, payment.status.changed, delivery.tracking.update ‚Äî HMAC-SHA256 (X-Signature), anti-replay (ts/nonce).

8) üéÆ AI-—Ç–æ–∫–µ–Ω—ã ‚Äî –ø—Ä–æ–¥—É–∫—Ç–æ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –∏ –∫–æ–Ω—Ñ–∏–≥

–ù–∞—á–∏—Å–ª–µ–Ω–∏–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é): 1 —Ç–æ–∫–µ–Ω / 100 ‚ÇΩ –æ–ø–ª–∞—á–µ–Ω–Ω–æ–π —Å—É–º–º—ã; –±–æ–Ω—É—Å—ã: –ø–µ—Ä–≤—ã–π –∑–∞–∫–∞–∑ +20, –∑–∞–∫–∞–∑ ‚â• 10 000 ‚ÇΩ ‚Üí +50, –ø—Ä–æ–º–æ-–±—Ä–µ–Ω–¥—ã +10%. –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è: 30 –¥–Ω–µ–π.
–°–ø–∏—Å–∞–Ω–∏–µ (–≥–∏–±—Ä–∏–¥): 1 —Ç–æ–∫–µ–Ω = 1 –∑–∞–ø—Ä–æ—Å; –µ—Å–ª–∏ –¥–ª–∏–Ω–∞ > 2000 GPT-—Ç–æ–∫–µ–Ω–æ–≤ ‚Äî —Å–ø–∏—Å–∞—Ç—å 2 —Ç–æ–∫–µ–Ω–∞. –ú–µ—Å—è—á–Ω—ã–π soft-cap, –Ω–∞–ø—Ä. 1000 —Ç–æ–∫–µ–Ω–æ–≤.
–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å: /balance; –ø—É—à–∏ –ø—Ä–∏ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–∏/—Å–ø–∏—Å–∞–Ω–∏–∏ (¬´–ë–∞–ª–∞–Ω—Å: N, —Å–≥–æ—Ä–∏—Ç —á–µ—Ä–µ–∑ X –¥–Ω–µ–π¬ª).
–•—Ä–∞–Ω–∏–ª–∏—â–µ: ai_tokens(user_id, balance, expire_at) + –∂—É—Ä–Ω–∞–ª –æ–ø–µ—Ä–∞—Ü–∏–π.
–¢—Ä–∏–≥–≥–µ—Ä –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è: order.paid.
–ö–æ–Ω—Ñ–∏–≥ (–±–µ–∑ —Ä–µ–ª–∏–∑–∞):

{
  "AI_TOKENS": {
    "EARN_PER_RUB": 0.01,
    "EXPIRE_DAYS": 30,
    "BONUS_FIRST_ORDER": 20,
    "BONUS_BIG_ORDER": { "THRESHOLD": 10000, "AMOUNT": 50 },
    "PROMO_BRANDS_EXTRA": 0.10,
    "SOFT_CAP_MONTH": 1000,
    "LONG_THRESHOLD_GPT_TOKENS": 2000,
    "LONG_COST_TOKENS": 2,
    "ENABLED": true
  }
}

9) –ù–µ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: p95 ‚â§ 5 —Å, p99 ‚â§ 8 —Å; –≤–Ω–µ—à–Ω–∏–µ —Ç–∞–π–º–∞—É—Ç—ã 3 —Å; –¥–æ 2 —Ä–µ—Ç—Ä–∞–µ–≤ (backoff + jitter), –±–µ–∑ —Ä–µ—Ç—Ä–∞–µ–≤ –Ω–∞ 4xx.

–ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å: /order rate-limit ‚â§ 5/–º–∏–Ω/–ø–æ–ª—å–∑.; –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å 72 —á.

–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å: ‚â• 99,5%.

–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ: –∫–æ–Ω—Ñ–∏–≥–∏/—Ñ–∏—á–µ—Ñ–ª–∞–≥–∏ –¥–ª—è AI-—Ç–æ–∫–µ–Ω–æ–≤ –∏ RAG-–∫–∞—Ç–∞–ª–æ–≥–∞.

10) –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –ü–î–Ω

JWT RS256 (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ API), HTTPS, X-Request-Id.

–í–µ–±—Ö—É–∫–∏: HMAC-SHA256, X-Signature, –∞–Ω—Ç–∏-replay (ts/nonce, TTL 300 —Å).

–ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ PII (—Ç–µ–ª–µ—Ñ–æ–Ω/–∞–¥—Ä–µ—Å) –≤ –ª–æ–≥–∞—Ö; role-based –¥–æ—Å—Ç—É–ø –∫ –∏—Å—Ç–æ—Ä–∏—è–º –∑–∞–∫–∞–∑–æ–≤; –∞—É–¥–∏–æ STT ‚Äî retention 7‚Äì30 –¥–Ω–µ–π.

–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ 152-–§–ó: —Ü–µ–ª–∏/—Å—Ä–æ–∫/—É–¥–∞–ª–µ–Ω–∏–µ –ø–æ –∑–∞–ø—Ä–æ—Å—É.

11) –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç—ã

–ú–µ—Ç—Ä–∏–∫–∏: latency p50/p95/p99, error-rate, no-result, —É—Ç–æ—á–Ω–µ–Ω–∏—è, CTR, conversion, –¥–æ–ª—è COD, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è AI-—Ç–æ–∫–µ–Ω–æ–≤ (–±–∞–ª–∞–Ω—Å/–Ω–∞—á–∏—Å–ª–µ–Ω–∏—è/—Å–ø–∏—Å–∞–Ω–∏—è).

–ê–ª–µ—Ä—Ç—ã: p95 > 5 —Å (15 –º–∏–Ω), –æ—à–∏–±–∫–∏ /bot/order > 3% (15 –º–∏–Ω), no-result > 12%/—Å—É—Ç–∫–∏, –¥–æ–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å 0 —Ç–æ–∫–µ–Ω–æ–≤ > 40% (7 –¥–Ω–µ–π).

12) –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ UAT

Unit/Integration: –∑–∞–≥–ª—É—à–∫–∏ Bitrix, —ç–º—É–ª—è—Ü–∏—è –ø–ª–∞—Ç–µ–∂–µ–π/–¥–æ—Å—Ç–∞–≤–∫–∏, –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å /order.

–ö–æ–º–ø–ª–µ–∫—Ç —Ç–µ—Å—Ç–æ–≤:

–ü–æ–∏—Å–∫/–∫–∞—Ä—Ç–æ—á–∫–∏ vs –≤–∏—Ç—Ä–∏–Ω–∞ (10 –º–æ–¥–µ–ª–µ–π √ó 3 –≤–∞—Ä–∏–∞–Ω—Ç–∞).

–ó–∞–∫–∞–∑ prepaid/COD, –æ—Ç–∫–∞–∑/—Ä–µ—Ç—Ä–∞–π, —Ä–µ–∑–µ—Ä–≤ –∏ TTL.

–í–∏–¥–∏–º–æ—Å—Ç—å —Å—Ç–∞—Ç—É—Å–æ–≤ (–ø—Ä–∞–≤–∞).

RMA: happy + error-path.

üéÆ AI-—Ç–æ–∫–µ–Ω—ã: –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ –Ω–∞ order.paid, —Å–ø–∏—Å–∞–Ω–∏–µ, expiry.

UAT-–∫—Ä–∏—Ç–µ—Ä–∏–∏: –º–µ—Ç—Ä–∏–∫–∏ –∏–∑ ¬ß2.2 –¥–æ—Å—Ç–∏–≥–Ω—É—Ç—ã; —Ü–µ–Ω—ã/–æ—Å—Ç–∞—Ç–∫–∏/—Å—Ç–∞—Ç—É—Å—ã —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å —Å–∞–π—Ç–æ–º; —Ç–æ–∫–µ–Ω—ã —Ä–∞–±–æ—Ç–∞—é—Ç –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º.

13) –†–æ–ª–ª–∞—É—Ç –∏ –ø–ª–∞–Ω —Ä–∞–±–æ—Ç

W1: –∫–∞—Ä–∫–∞—Å –±–æ—Ç–∞, STT; /bot/find; —Å–≤—è–∑–∫–∞ —Ü–µ–Ω/–≥—Ä—É–ø–ø; –∫–∞—Ä—Ç–æ—á–∫–∏.

W2: order(prepaid/COD), –∫–æ—Ä–∑–∏–Ω–∞, –∑–∞–∫–∞–∑—ã/—Å—Ç–∞—Ç—É—Å—ã/—Ç—Ä–µ–∫–∏–Ω–≥; –≤–µ–±—Ö—É–∫–∏; RMA-–º–∏–Ω–∏–º—É–º; üéÆ AI-—Ç–æ–∫–µ–Ω—ã (–Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ/—Å–ø–∏—Å–∞–Ω–∏–µ/–∫–æ–Ω—Ñ–∏–≥).

W3: –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å/–¥–∞—à–±–æ—Ä–¥—ã; UAT; —Ä–µ–ª–∏–∑.

14) –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è –∏–∑ Bitrix)

A1. –¢–∏–ø—ã —Ü–µ–Ω ‚Üî –≥—Ä—É–ø–ø—ã (ID/–∫–æ–¥/–Ω–∞–∑–≤–∞–Ω–∏–µ; –ø—Ä–∞–≤–∞ ¬´–ø—Ä–æ—Å–º–æ—Ç—Ä/–ø–æ–∫—É–ø–∫–∞¬ª).

A2. –°–ª—É–∂–±—ã –¥–æ—Å—Ç–∞–≤–∫–∏ (ID/–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ —Å–∞–π—Ç—É/–≥–æ—Ä–æ–¥—É/–ü–°).

A3. –ü–ª–∞—Ç—ë–∂–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã (ID/–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è; callback/result URL).

A4. –°—Ç–∞—Ç—É—Å—ã –∑–∞–∫–∞–∑–æ–≤ (ID/–∫–æ–¥/–∏–º—è, ¬´–≤–∏–¥–∏–º –∫–ª–∏–µ–Ω—Ç–æ–º¬ª, –º–∞–ø–ø–∏–Ω–≥ ‚Üí normalized).

A5. –°–≤–æ–π—Å—Ç–≤–∞ –∑–∞–∫–∞–∑–∞ (–¥–ª—è ¬´–§–∏–∑. –ª–∏—Ü–æ¬ª: –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å/–º–∞—Å–∫–∏).

A6. (–û–ø—Ü.) –°–∫–ª–∞–¥—ã: public-stores, –ø–æ—Ä–æ–≥–∏ many/low (–µ—Å–ª–∏ per-store).